{% extends 'base.html.twig' %}

{% block title %}Edit User{% endblock %}

{% block body %}

<div class="card">
    <div class="card-header"><h1>Edit User</h1></div>
    <div class="card-body">
        {{ include('admin/user/_form.html.twig', {'button_label': 'Update'}) }}

        <div class="row col-md-12">
            <div class="col-md-6 text-left">
                <button id="sendMail" type="button" class="btn btn-info" data-action="{{ path('send_activation', {'id': user.id}) }}" data-target="#sendResult">Send Activation</button>
            </div>
            <div class="col-md-6 text-right">
                {{ include('admin/user/_delete_form.html.twig') }}
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="sendResult" tabindex="-1" role="dialog" aria-labelledby="sendResultLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="sendResultLabel">Send Validation eMail</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
$( document ).ready(function() {

    $('#sendMail').on('click', function(e) {
        e.preventDefault()
        var url = $(this).data('action')
        var target = $(this).data('target')
        console.log(url)
        $.get(url, function(data) {
            console.log(data)
            $(target).find('.modal-body').html(data)
            $(target).modal('show')
        }).fail(function() {
            
        })
    })

});
</script>
{% endblock %}
